# DISABLED!

machine:
  services:
    - docker

dependencies:
  cache_directories:
    - "~/.hex/packages"
  pre:
    - mkdir -p $HOME/tmp && cd $HOME/tmp
    - wget https://packages.erlang-solutions.com/erlang-solutions_1.0_all.deb && sudo dpkg -i erlang-solutions_1.0_all.deb
    - sudo apt-get update
    - sudo apt-get install -y elixir
  override:
    - mix local.hex --force
    - mix local.rebar --force
    - mix archive.install --force http://git.io/edib-0.5.0.ez
    - mix local
  post:
    - docker pull edib/edib-tool:1.0

test:
  pre:
    - docker version
    - cd $HOME/$CIRCLE_PROJECT_REPONAME
    - ls -ahlF
  override:
    - mix edib --prefix circleci
